{{- $title := slice .Site.Title }}
{{- if .Title }}
    {{- $title = slice .Title " | " .Site.Title  }}
{{- end }}
{{- $title = delimit $title "" }}
{{- $pageTitle := $title }}
{{- $previewTitle := $title }}

{{- $description := "" }}
{{ with .Site.Params.description }}
    {{- $description = . }}
{{- end }}

{{- if .IsPage }}
    {{- $previewTitle = .Title }}

    {{- with .Description }}
        {{- $description = . }}
    {{- end }}

    {{- $image := .Resources.Get "poster.webp" }}
    {{- if not $image }}
        {{- $image = .Resources.Get "banner.webp" }}
    {{- end }}
    {{- with $image }}
        <meta property="og:image" content="{{- .Permalink -}}">
    {{- end }}
{{- end }}

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta property="og:site_name" content="{{- .Site.Title -}}">
<meta property="og:url" content="{{- .Permalink -}}">
<meta property="og:title" content="{{- $previewTitle -}}">
<meta property="og:description" content="{{- $description -}}">

<meta name="description" content="{{- $description -}}">

<title>{{- $pageTitle -}}</title>
<link rel="canonical" href="{{- .Permalink -}}">

{{- $favicon := resources.Get "favicon.png" }}
{{- with $favicon }}
<link rel="icon" type="image/png" href="{{- .RelPermalink -}}">
{{- else }}
<!-- To suppress browser's favicon 404 error --> <!-- https://stackoverflow.com/a/77116773 -->
<!-- <link rel="shortcut icon" href="#"> --> <!-- This will make a second request from the same URL -->
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
{{- end }}
